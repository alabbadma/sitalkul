<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ููุตุฉ ุณุช ุงููู</title>

    <!-- ุฎุท Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <style>
      html,body{height:100%;margin:0}
      body,*{font-family:"Cairo",system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans Arabic",sans-serif}
      #boot{position:fixed;inset:0;display:grid;place-items:center}
      #boot .err{direction:ltr;white-space:pre-wrap;background:#fff3f3;border:1px solid #f5c2c7;border-radius:10px;padding:12px;color:#842029;max-width:90%;max-height:60vh;overflow:auto}
      .stk-footer{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #eee;padding:10px 12px;text-align:center;z-index:9999;font-size:14px;line-height:1.6}
      .stk-hide{display:none !important}
    </style>

    <!-- CSS ุงูุฃุตูู -->
    <link rel="stylesheet" href="./assets/index-f95b4819.css" />
  </head>
  <script>
(function(){
  const needed = ['weeks','programs','evidences','globalEvents','schoolRadioSchedule','schoolSettings','weeklyActivityPlans'];
  if (needed.every(k => localStorage.getItem(k))) return;

  const weeks = [{ id:'week4', title:'ุงูุฃุณุจูุน ุงูุฑุงุจุน', start:'1447/03/22', end:'1447/03/26' }];
  const schoolSettings = { schoolName:'ูุฏุฑุณุฉ ุณุช ุงููู ุงููุชูุณุทุฉ', principal:'ุณุช ุงููู', activitiesLeader:'ุณุช ุงููู' };
  const SAMPLE_PLANS = [{
    id:'plan_week_4',
    title:'๐ ุฎุทุฉ ุงูุฃุณุจูุน ุงูุฑุงุจุน (1447/03/22 โ 1447/03/26)',
    gradeBand:'ุงูุตููู ุงูุฃูููุฉ',
    days:[
      {date:'1447/03/22', field:'ุงูุนููู ูุงูุชูููุฉ', program:'ุงูุฐูุงุก ุงูุงุตุทูุงุนู', topic:'ููู ุฃููุฒ ุจูู ุงูุฅูุณุงู ูุงูุขูุฉุ', requirements:'ุฌูุงุฒ ุฐูู โ ุชุฌุฑุจุฉ ุชูุงุนููุฉ โ ููุงูุดุฉ ุตููุฉ'},
      {date:'1447/03/23', field:'ุงูุนููู ูุงูุชูููุฉ', program:'ุงูุชุตุงููู ุงูุนูููุฉ ุงูุชูููุฉ', topic:'ุงุจุชูุงุฑ ุฃุฏุงุฉ ุจุณูุทุฉ', requirements:'ูุฑุชูู โ ุฎุดุจ ุฎููู โ ุฃููุงู โ ุฃุฏูุงุช ูุตู'},
      {date:'1447/03/24', field:'ุงูุฑูุงุถุฉ ูุงูุตุญุฉ', program:'ุงููุดุงุท ุงูุจุฏูู', topic:'ูุนุจุฉ ุงูุชุฑููุฒ ูุฑุฏุฉ ุงููุนู', requirements:'ุจุทุงูุงุช / ุฅุดุงุฑุงุช โ ูุดุงุท ุฌูุงุนู'},
      {date:'1447/03/25', field:'ุงูููุงุทูุฉ ูุงูุญูุงุฉ', program:'ุงูุงูุชูุงุก ุงููุทูู', topic:'ุงูููุฒ ููู ุงูุญูุงุฌุฒ', requirements:'ุฃุทูุงู โ ุฌูุงุฆุฒ ุจุณูุทุฉ'},
      {date:'1447/03/26', field:'ุงูุซูุงูุฉ ูุงููููู', program:'ุงููููู', topic:'ุชูุธูู ุงููุตู ููุซุฑ ุงููุจุงุชุงุช (ุฃุตุฏูุงุก ุงูุฃุฑุถ)', requirements:'ุฃุฏูุงุช ุชูุธูู โ ุณูุงู ูุฑุฒ โ ูุจุงุชุงุช'}
    ]
  }];

  if(!localStorage.getItem('weeks')) localStorage.setItem('weeks', JSON.stringify(weeks));
  if(!localStorage.getItem('programs')) localStorage.setItem('programs', JSON.stringify([]));
  if(!localStorage.getItem('evidences')) localStorage.setItem('evidences', JSON.stringify([]));
  if(!localStorage.getItem('globalEvents')) localStorage.setItem('globalEvents', JSON.stringify([]));
  if(!localStorage.getItem('schoolRadioSchedule')) localStorage.setItem('schoolRadioSchedule', JSON.stringify([]));
  if(!localStorage.getItem('schoolSettings')) localStorage.setItem('schoolSettings', JSON.stringify(schoolSettings));
  if(!localStorage.getItem('weeklyActivityPlans')) localStorage.setItem('weeklyActivityPlans', JSON.stringify(SAMPLE_PLANS));
})();
</script>

  <body>
    <div id="root"></div>
    <div id="boot">ุฌุงุฑู ุงูุชุญูููโฆ</div>

    <!-- ุณูุฑุจุช ุงูุชุทุจูู ุงูุฃุตูู -->
    <script type="module" src="./assets/index-a7c04ef5.js"></script>

    <!-- ุณูุฑุจุช ูุฑุถ ุงูุงุณุชุจุฏุงูุงุช ูุฅุถุงูุฉ ุงูููุชุฑ -->
    <script>
      // ุนููุงู ุงูุตูุญุฉ ูุงูููุชุง
      document.title = 'ููุตุฉ ุณุช ุงููู';
      function setMeta(name, content){
        let el = document.querySelector(`meta[property="${name}"], meta[name="${name}"]`);
        if(!el){
          el = document.createElement('meta');
          (name.startsWith('og:')) ? el.setAttribute('property', name) : el.setAttribute('name', name);
          document.head.appendChild(el);
        }
        el.setAttribute('content', content);
      }
      setMeta('og:title','ููุตุฉ ุณุช ุงููู');
      setMeta('twitter:title','ููุตุฉ ุณุช ุงููู');
      setMeta('description','ููุตุฉ ุณุช ุงููู ูุฅุฏุงุฑุฉ ููุงุดุท ุงููุฏุฑุณุฉ ุงูุชุนููููุฉ ูุงููุงูููุฌูุฉ');

      // ุงูุนุจุงุฑุงุช ุงููุทููุจ ุงุณุชุจุฏุงููุง (ูุน ูู ุงูุงุญุชูุงูุงุช)
      const hardReplacePairs = [
        // ุงูุนููุงู ุงูุนุงู
        [/(?:ููุตุฉ\s*)?ุงููุดุงุท\s*ุงูุทูุงุจู/gi, 'ููุตุฉ ุณุช ุงููู'],
        // ุงุณู ุงููุฏุฑุณุฉ
        [/ูุฏุฑุณุฉ\s+.*?\s+ุงููุชูุณุทุฉ/gi, 'ูุฏุฑุณุฉ ุณุช ุงููู ุงููุชูุณุทุฉ'],
        // ุงูุชุฐููู ุงููุฏูู
        [/ุจุฑูุฌุฉ\s*ู?\s*ุชุตููู/gi, 'ุฌููุน ุงูุญููู ูุญููุธุฉ 2025 โ ุฃ. ูุญูุฏ ุจู ุนุจุฏุงูุนุฒูุฒ ุงูุนุจุงุฏ'],
        // ุฃู ุธููุฑ ูุงุณู ุงููุจุฑูุฌ ุงููุฏูู
        [/ุนุจุฏ ?ุงููู/gi, 'ูุญูุฏ ุจู ุนุจุฏุงูุนุฒูุฒ ุงูุนุจุงุฏ'],
        [/Shahid\s*Weeks/gi, 'ููุตุฉ ุณุช ุงููู']
      ];

      // ุงุณุชุจุฏุงู ุขูู ููู ุนูุฏุฉ ูุตูุฉ
      function replaceInNode(node){
        if(node.nodeType === Node.TEXT_NODE){
          let t = node.nodeValue, changed = false;
          for(const [re, rep] of hardReplacePairs){
            const nt = t.replace(re, rep);
            if(nt !== t){ t = nt; changed = true; }
          }
          if(changed) node.nodeValue = t;
        } else if(node.nodeType === Node.ELEMENT_NODE){
          // ูู ุงููุต ููุฒุน ุนูู ุนูุงุตุฑ ูุชุนุฏุฏุฉ ุฏุงุฎู ุนูุตุฑ ูุงุญุฏ (ูุซู ุงูููุชุฑ)
          const txt = node.innerText || '';
          if(/ุจุฑูุฌุฉ|ุชุตููู|ุนุจุฏ ?ุงููู/.test(txt) && txt.length < 120 && node.tagName !== 'SCRIPT' && node.tagName !== 'STYLE'){
            node.innerText = txt
              .replace(/ุจุฑูุฌุฉ\s*ู?\s*ุชุตููู/gi, 'ุฌููุน ุงูุญููู ูุญููุธุฉ 2025')
              .replace(/ุนุจุฏ ?ุงููู/gi, '');
          }
          node.childNodes.forEach(replaceInNode);
        }
      }

      // ุฅุฎูุงุก ุฃู ููุชุฑ ูุฏูู ูุงุถุญ
      function hideOldFooters(){
        const candidates = Array.from(document.querySelectorAll('footer,[class*="footer"],[id*="footer"]'));
        candidates.forEach(el=>{
          const t = (el.innerText||'').trim();
          if(/ุจุฑูุฌุฉ|ุชุตููู|ุนุจุฏ ?ุงููู|ุญููู/.test(t)) el.classList.add('stk-hide');
        });
      }

      // ุฅุถุงูุฉ ููุชุฑูุง ุงูุซุงุจุช
      function ensureFooter(){
        if(document.getElementById('stk-footer')) return;
        const f = document.createElement('div');
        f.id = 'stk-footer';
        f.className = 'stk-footer';
        f.innerHTML = '<strong>ููุตุฉ ุณุช ุงููู</strong><div>ููุตุฉ ุชุฌุฑูุจูุฉ โ ุฌููุน ุงูุญููู ูุญููุธุฉ 2025</div>';
        document.body.appendChild(f);
      }

      // ุชุดุบูู ุงูุงุณุชุจุฏุงู ุจุดูู ูุชูุฑุฑ ุฃูู ุซูุงูู + ูุฑุงูุจุฉ ูุงุญูุฉ
      function sweep(){
        try { replaceInNode(document.body); hideOldFooters(); ensureFooter(); } catch(e){}
      }
      // ูุณุญ ูุชูุฑุฑ ุฃูู 10 ุซูุงูู (ููุชูุท ุชุญููู SPA ุงููุฑุญูู)
      let n=0, iv = setInterval(()=>{ sweep(); if(++n>20){ clearInterval(iv); } }, 500);
      // ูุฑุงูุจ ุชุบููุฑุงุช DOM ุจุนุฏ ุฐูู
      const mo = new MutationObserver(()=>sweep());
      mo.observe(document.documentElement, { childList:true, subtree:true, characterData:true });

      // ุฅุฒุงูุฉ ุดุงุดุฉ ุงูุชุญููู ุจุนุฏ ุธููุฑ ุงููุญุชูู
      window.addEventListener('load', ()=>{ document.getElementById('boot')?.remove(); sweep(); });
    </script>

    <noscript>ูุฐู ุงูุตูุญุฉ ุชุชุทูุจ ุชูุนูู JavaScript.</noscript>
  </body>
</html>

